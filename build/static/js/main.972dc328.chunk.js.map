{"version":3,"sources":["components/Person.js","components/Persons.js","components/Filter.js","services/personservices.js","components/PersonForm.js","App.js","index.js"],"names":["Person","props","Button","handleClick","onClick","dude","name","number","handleDelete","Persons","numbersToShow","search","persons","filter","peep","toUpperCase","includes","map","key","Filter","value","newSearch","onChange","handleSearch","baseUrl","axios","get","then","response","data","newObject","post","id","delete","changedPerson","put","PersonForm","onSubmit","event","preventDefault","existing","find","p","window","confirm","personservice","returnedPerson","personSetter","person","okSetter","setTimeout","catch","error","errorSetter","noteObject","newPerson","console","log","concat","nameSetter","numberSetter","nameChangeHandler","numberChangeHandler","type","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setNewSearch","errorMessage","setErrorMessage","okMessage","setokMessage","useEffect","personToBeAdded","length","Notification","message","className","Errormessagehandler","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.972dc328.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Person = (props) => {\r\n  \r\n  const Button = ({handleClick}) => (\r\n    <button onClick={handleClick}>Delete</button>\r\n  );\r\n\r\n  return (\r\n    <p>\r\n      {props.dude.name} {props.dude.number}\r\n      <Button handleClick={() => props.handleDelete(props)}/>\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = (props) => {\r\n  const numbersToShow =\r\n    props.search === \"\"\r\n      ? props.persons\r\n      : props.persons.filter((peep) =>\r\n          peep.name.toUpperCase().includes(props.search.toUpperCase())\r\n        );\r\n\r\n  return (\r\n    <div>\r\n      {numbersToShow.map((dude) => (\r\n        <Person key={dude.name} dude={dude} number={dude.number} handleDelete={props.handleDelete} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      Filter shown with:{\" \"}\r\n      <input value={props.newSearch} onChange={props.handleSearch} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const deletePerson = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const modifyPerson = (id, changedPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, changedPerson)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  export default { getAll, create, deletePerson, modifyPerson }","import React from \"react\";\r\nimport personservice from \"../services/personservices\";\r\n\r\n\r\nconst PersonForm = (props) => {\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    if (props.name===\"\"){\r\n      return;\r\n    }\r\n    const existing = props.persons.find((p) => p.name.toUpperCase() === props.name.toUpperCase());\r\n\r\n    if (existing) {\r\n      if(window.confirm(`${props.name} is already added to phonebook, replace the old number with a new one?`)){\r\n\r\n        const changedPerson = {...existing, number: props.number};\r\n        personservice\r\n          .modifyPerson (existing.id, changedPerson)\r\n          .then(returnedPerson => {\r\n            props.personSetter(props.persons.map(person => person.id !== existing.id ? person : returnedPerson))\r\n            props.okSetter(`Replaced the number for ${props.name}`)\r\n            setTimeout(() => {\r\n              props.okSetter(null)\r\n            }, 5000)\r\n            })\r\n          .catch(error => {\r\n            props.errorSetter(`Information of ${props.name} has already been removed from the server`)\r\n            setTimeout(() => {\r\n              props.okSetter(null)\r\n            }, 5000)\r\n          })     \r\n      }\r\n    } else {\r\n      const noteObject = {\r\n        name: props.name,\r\n        number: props.number};\r\n      personservice\r\n      .create(noteObject)\r\n      .then(newPerson => {\r\n        console.log('so far so good')\r\n        props.personSetter(props.persons.concat(newPerson));\r\n        props.okSetter(`Added ${props.name}`)\r\n        setTimeout(() => {\r\n        props.okSetter(null)\r\n        }, 5000)\r\n        })\r\n        .catch(error => {\r\n          console.log('SOS')\r\n          props.errorSetter(error.response.data)\r\n          setTimeout(() => {\r\n            props.okSetter(null)\r\n          }, 5000)\r\n          console.log(error.response.data)\r\n        })\r\n    }\r\n    props.nameSetter(\"\");\r\n    props.numberSetter(\"\");\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        Name: <input value={props.name} onChange={props.nameChangeHandler} />\r\n      </div>\r\n      <div>\r\n        Number:{\" \"}\r\n        <input value={props.number} onChange={props.numberChangeHandler} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Persons from \"./components/Persons\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport personservice from \"./services/personservices\";\r\nimport './index.css'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [newSearch, setNewSearch] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [okMessage, setokMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personservice\r\n    .getAll()\r\n    .then(personToBeAdded => {\r\n      setPersons(personToBeAdded);\r\n    })\r\n  }, []);\r\n  console.log(\"render\", persons.length, \"persons\");\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n  const handleSearch = (event) => {\r\n    setNewSearch(event.target.value);\r\n  };\r\n\r\n  const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className=\"notification\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Errormessagehandler = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleDelete = (props) => {\r\n    if(window.confirm(`Delete ${props.dude.name}`)){\r\n      personservice\r\n      .deletePerson(props.dude.id)\r\n      .then(() => {\r\n        setPersons(persons.filter(person => person.id !== props.dude.id))\r\n    })\r\n      .catch(error => {\r\n        setErrorMessage(\"Couldn't remove from database\")\r\n      })\r\n      setokMessage(`Deleted ${props.dude.name}`)\r\n      setTimeout(() => {\r\n        setokMessage(null)\r\n      }, 5000)\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={okMessage} />\r\n      <Errormessagehandler message={errorMessage} />\r\n      <Filter newSearch={newSearch} handleSearch={handleSearch} />\r\n\r\n      <h2>Add a new number</h2>\r\n      <PersonForm\r\n        name={newName}\r\n        nameChangeHandler={handleNameChange}\r\n        number={newNumber}\r\n        numberChangeHandler={handleNumberChange}\r\n        persons={persons}\r\n        personSetter={setPersons}\r\n        nameSetter={setNewName}\r\n        numberSetter={setNewNumber}\r\n        errorSetter={setErrorMessage}\r\n        okSetter={setokMessage}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n      <Persons search={newSearch} persons={persons} handleDelete={handleDelete}/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}